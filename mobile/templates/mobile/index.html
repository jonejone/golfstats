{% extends "mobile/base.html" %}

{% block content %}

<div data-role="page">
    <div data-role="header">
        <h1>Welcome to Golfstats!</h1>
    </div>
    <div data-role="content">
        <p><a data-role="button" href="#create-game">Create new game</a></p>
    </div>
</div>

<div data-role="page" id="game">
    <div data-role="header">
        <h1>Game X</h1>
    </div>
    <div data-role="content">
        <h2>Players</h2>
        <ul data-role="listview" id="game-players">
            <li>Player x</li>
        </ul>
        <p>I think we should <a href="#play-hole-one">play hole one</a></p>
    </div>
</div>

<div data-role="page" id="create-game">
    <div data-role="header">
        <h1>Create new game</h1>
    </div>

    <div data-role="content">
        <label for="select-course">Course</label>
        <select id="select-course" name="course">
            <!-- Options will be added dynamically -->
        </select>

        <fieldset>
            <label for="select-players">Players</label>
            <select id="select-players" name="players" multiple data-native-menu="false">
                <!-- Options will be added dynamically -->
            </select>
        </fieldset>

        <fieldset class="ui-grid-a">
            <div class="ui-block-a">
                <button type="button" data-rel="back" data-theme="c">Cancel</button>
            </div>
            <div class="ui-block-b">
                <button id="create-game-button" type="submit" data-theme="b">Create game</button>
            </div>
        </fieldset>
    </div>
</div>

<div data-role="page" id="game-hole">
    <div data-role="header">
        <h1>Hole X</h1>

        <div data-role="navbar">
            <ul>
                <li><a class="betong-button" href="#">Betong</a></li>
                <li><a class="starframe-button" href="#">Starframe</a></li>
            </ul>
        </div>
    </div>
    <div data-role="content">
        <ul data-role="listview" id="game-hole-players">
        </ul>
    </div>

    <div data-role="footer">
        <div class="ui-bar footer-buttons">
            <a class="previous-hole" data-role="button" href="#" data-icon="arrow-l">Previous hole</a>
            <a class="next-hole" data-role="button" href="#" data-icon="arrow-r" data-iconpos="right">Next hole</a>
        </div>
    </div>
</div>


{% endblock %}

{% block before_body_end %}
<script>
var game;
$(function() {
});

var game_view;
(function(window) {

    game_view = new GameView();

    {% autoescape off %}
    var players_json = '{{ players }}';
    var courses_json = '{{ courses }}';
    {% endautoescape %}

    game_view.setPlayers($.parseJSON(players_json));
    game_view.setCourses($.parseJSON(courses_json));


    /*
    $('a[href="#play-the-game"]').click(function() {
        game_view.setCurrentGame(game);        
        $.mobile.changePage("#game");
    });

    $('a[href="#play-hole-one"]').click(function() {
        game_view.setCurrentHole(game.course.holes[0]); 
        $.mobile.changePage('#game-hole');
    });
    */


}(window));


</script>
{% endblock %}
