{% extends "base.html" %}
{% load url from future %}
{% load score_game_player_hole %}
{% load golfstats_games %}

{% block content %}
<h1>Game {{ game.id }}</h1>

<p><a href="{% url "golfstats-games-games-play" game.id %}">
    Play this game
</a>

<h2>Players</h2>

<ul>
{% for player in game.players.all %}
    <li><a href="{% url "golfstats-players-players-detail" player.id %}">
        {{ player }}
    </a></li>
{% empty %}
    <li>There are no players in this game</li>
{% endfor %}
</ul>

<h2>Course</h2>

<p><a href="{% url "golfstats-courses-course-detail" game.course.id %}">
    {{ game.course }}</a>
    on
    <a href="{% url "golfstats-courses-arenas-detail" game.course.arena.id %}">
    {{ game.course.arena }}</a>
</p>

<h2>Standings</h2>

<table class="standings">
    <thead>
        <tr>
            <th class="player">Player</th>
            {% for hole in game.course.coursehole_set.all %}
            <th class="hole">{{ hole.order }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
    {% for player in game.players.all %}
    <tr>
        <td>{{ player.name }}</td>
        {% for hole in game.course.coursehole_set.all %}
        {% get_player_score player.id hole.id game.id gamehole %}
        <td class="hole {% if gamehole %}{% get_hole_score_css_class gamehole %}{% endif %}">
            {% if gamehole %}
                {{ gamehole.throws }}
            {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
