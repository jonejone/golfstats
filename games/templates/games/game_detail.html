{% extends "base.html" %}
{% load url from future %}
{% load score_game_player_hole %}

{% block content %}
<h1>Game {{ game.id }}</h1>

<p><a href="{% url "golfstats-games-games-play" game.id %}">
    Play this game
</a>

<h2>Players</h2>

<ul>
{% for player in game.players.all %}
    <li><a href="{% url "golfstats-players-players-detail" player.id %}">
        {{ player }}
    </a></li>
{% empty %}
    <li>There are no players in this game</li>
{% endfor %}
</ul>

<h2>Course</h2>

<p><a href="{% url "golfstats-courses-course-detail" game.course.id %}">
    {{ game.course }}</a>
    on
    <a href="{% url "golfstats-courses-arenas-detail" game.course.arena.id %}">
    {{ game.course.arena }}</a>
</p>

<h2>Standings</h2>

<table>
    <tr>
        <th>Player</th>
        {% for hole in game.course.coursehole_set.all %}
        <th>{{ hole.order }}</th>
        {% endfor %}
    </tr>
    {% for player in game.players.all %}
    <tr>
        <td>{{ player.name }}</td>
        {% for hole in game.course.coursehole_set.all %}
        <td>{% get_player_score player.id hole.id game.id %}</td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>

{% endblock %}
